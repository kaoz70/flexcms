!function(){function t(n,t){var i,r;this.el=document.querySelector(n);this.events=t;this.current=moment().date(1);this.draw();i=document.querySelector(".today");i&&(r=this,window.setTimeout(function(){r.openDay(i)},500))}function n(n,t,i){var r=document.createElement(n);return t&&(r.className=t),i&&(r.innderText=r.textContent=i),r}var i=moment();t.prototype.draw=function(){this.drawHeader();this.drawMonth();this.drawLegend()};t.prototype.drawHeader=function(){var r=this,t,i;this.header||(this.header=n("div","header"),this.header.className="header",this.title=n("h1"),t=n("div","right"),t.addEventListener("click",function(){r.nextMonth()}),i=n("div","left"),i.addEventListener("click",function(){r.prevMonth()}),this.header.appendChild(this.title),this.header.appendChild(t),this.header.appendChild(i),this.el.appendChild(this.header));this.title.innerHTML=this.current.format("MMMM YYYY")};t.prototype.drawMonth=function(){var t=this;this.events.forEach(function(n){n.date=t.current.clone().date(Math.random()*28+1)});this.month?(this.oldMonth=this.month,this.oldMonth.className="month out "+(t.next?"next":"prev"),this.oldMonth.addEventListener("webkitAnimationEnd",function(){t.oldMonth.parentNode.removeChild(t.oldMonth);t.month=n("div","month");t.backFill();t.currentMonth();t.fowardFill();t.el.appendChild(t.month);window.setTimeout(function(){t.month.className="month in "+(t.next?"next":"prev")},16)})):(this.month=n("div","month"),this.el.appendChild(this.month),this.backFill(),this.currentMonth(),this.fowardFill(),this.month.className="month new")};t.prototype.backFill=function(){var n=this.current.clone(),t=n.day(),i;if(t)for(n.subtract("days",t+1),i=t;i>0;i--)this.drawDay(n.add("days",1))};t.prototype.fowardFill=function(){var t=this.current.clone().add("months",1).subtract("days",1),i=t.day(),n;if(i!==6)for(n=i;n<6;n++)this.drawDay(t.add("days",1))};t.prototype.currentMonth=function(){for(var n=this.current.clone();n.month()===this.current.month();)this.drawDay(n),n.add("days",1)};t.prototype.getWeek=function(t){this.week&&t.day()!==0||(this.week=n("div","week"),this.month.appendChild(this.week))};t.prototype.drawDay=function(t){var u=this,i;this.getWeek(t);i=n("div",this.getDayClass(t));i.addEventListener("click",function(){u.openDay(this)});var f=n("div","day-name",t.format("ddd")),e=n("div","day-number",t.format("DD")),r=n("div","day-events");this.drawEvents(t,r);i.appendChild(f);i.appendChild(e);i.appendChild(r);this.week.appendChild(i)};t.prototype.drawEvents=function(t,i){if(t.month()===this.current.month()){var r=this.events.reduce(function(n,i){return i.date.isSame(t,"day")&&n.push(i),n},[]);r.forEach(function(t){var r=n("span",t.color);i.appendChild(r)})}};t.prototype.getDayClass=function(n){return classes=["day"],n.month()!==this.current.month()?classes.push("other"):i.isSame(n,"day")&&classes.push("today"),classes.join(" ")};t.prototype.openDay=function(t){var r,e=+t.querySelectorAll(".day-number")[0].innerText||+t.querySelectorAll(".day-number")[0].textContent,o=this.current.clone().date(e),i=document.querySelector(".details"),u,f;i&&i.parentNode===t.parentNode?(r=i,u=document.querySelector(".arrow")):(i&&(i.addEventListener("webkitAnimationEnd",function(){i.parentNode.removeChild(i)}),i.addEventListener("oanimationend",function(){i.parentNode.removeChild(i)}),i.addEventListener("msAnimationEnd",function(){i.parentNode.removeChild(i)}),i.addEventListener("animationend",function(){i.parentNode.removeChild(i)}),i.className="details out"),r=n("div","details in"),u=n("div","arrow"),r.appendChild(u),t.parentNode.appendChild(r));f=this.events.reduce(function(n,t){return t.date.isSame(o,"day")&&n.push(t),n},[]);this.renderEvents(f,r);u.style.left=t.offsetLeft-t.parentNode.offsetLeft+15+"px"};t.prototype.renderEvents=function(t,i){var r=i.querySelector(".events"),u=n("div","events in"+(r?" new":"")),f,e;t.forEach(function(t){var i=n("div","event"),r=n("div","event-category "+t.color),f=n("span","",t.eventName);i.appendChild(r);i.appendChild(f);u.appendChild(i)});t.length||(f=n("div","event empty"),e=n("span","","No Events"),f.appendChild(e),u.appendChild(f));r?(r.className="events out",r.addEventListener("webkitAnimationEnd",function(){r.parentNode.removeChild(r);i.appendChild(u)}),r.addEventListener("oanimationend",function(){r.parentNode.removeChild(r);i.appendChild(u)}),r.addEventListener("msAnimationEnd",function(){r.parentNode.removeChild(r);i.appendChild(u)}),r.addEventListener("animationend",function(){r.parentNode.removeChild(r);i.appendChild(u)})):i.appendChild(u)};t.prototype.drawLegend=function(){var t=n("div","legend"),i=this.events.map(function(n){return n.calendar+"|"+n.color}).reduce(function(n,t){return n.indexOf(t)===-1&&n.push(t),n},[]).forEach(function(i){var r=i.split("|"),u=n("span","entry "+r[1],r[0]);t.appendChild(u)});this.el.appendChild(t)};t.prototype.nextMonth=function(){this.current.add("months",1);this.next=!0;this.draw()};t.prototype.prevMonth=function(){this.current.subtract("months",1);this.next=!1;this.draw()};window.Calendar=t}();!function(){var t=new Calendar(".mini-calendar",[{eventName:"Lunch Meeting w/ Mark",calendar:"Work",color:"danger"},{eventName:"Interview - Jr. Web Developer",calendar:"Work",color:"danger"},{eventName:"Demo New App to the Board",calendar:"Work",color:"danger"},{eventName:"Dinner w/ Marketing",calendar:"Work",color:"danger"},{eventName:"Game vs Portalnd",calendar:"Sports",color:"info"},{eventName:"Game vs Houston",calendar:"Sports",color:"info"},{eventName:"Game vs Denver",calendar:"Sports",color:"info"},{eventName:"Game vs San Degio",calendar:"Sports",color:"info"},{eventName:"School Play",calendar:"Kids",color:"warning"},{eventName:"Parent/Teacher Conference",calendar:"Kids",color:"warning"},{eventName:"Pick up from Soccer Practice",calendar:"Kids",color:"warning"},{eventName:"Ice Cream Night",calendar:"Kids",color:"warning"},{eventName:"Free Tamale Night",calendar:"Other",color:"success"},{eventName:"Bowling Team",calendar:"Other",color:"success"},{eventName:"Teach Kids to Code",calendar:"Other",color:"success"},{eventName:"Startup Weekend",calendar:"Other",color:"success"}])}();
//# sourceMappingURL=mini-calendar.min.js.map
